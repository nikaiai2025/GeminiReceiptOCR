# 作業指示
日本語のレシート画像（PDF）を与えます。
各レシートについて内容を読み取り、一部を加工してCSV形式で出力してください。
レスポンスは CSVデータのみ（余計な説明なし）

##　出力項目
1. `ファイル名` :PDFファイル名をそのまま表示
1. `ページ番号` :PDF内のページ数を表示（１始まりの整数）
1. `日付` :YYYY-MM-DD形式
1. `店名` :レシートの発行者
1. `合計金額` :商品単位ではなく、レシート全体の合計金額
1. `登録番号` :Tから始まる数字13桁（補足：「適格請求書発行事業者」の登録を受けた場合に、事業者に通知される番号）
1. `支払い手段` :クレジットカード使用が読み取れる場合は `クレジットカード` を表示。そうでない場合、キャッシュレス決済が読み取れる場合は `キャッシュレス決済` を表示し、不明の場合は `現金` を表示
1. `アラート` :データ内容に問題がある場合や、読み取り精度に自信がない場合に状況を出力

## 文字の読み取りと加工の詳細
- 読み取り不可： 文字不鮮明などで一部の項目が読み取れない場合は`不明`とする。**推測や補正は行わない**
- `日付`の出力形式： YYYY-MM-DD形式に合わせる（年の表記がない場合は補う）
- `合計金額`の出力形式： カンマ `,` や円記号 `¥` は省略し、数字のみを出力（CSV構造を破壊する**カンマは確実に排除**すること）
- `登録番号`の出力形式： 数字の途中にハイフン`-`が含まれる場合は省略する（例：`T1-2345-6789-0123`の場合は`T1234567890123`に変換）
- 外国レシート： `合計金額`について、金額単位が日本円でない場合のみ通貨記号を表示（例：`€ 6.00`）。アラートに「外国レシート」と出力
- 法人名称とサービス名： `店名`について、レシートにサービス名と法人名称がある場合は **法人名称**を優先（例：`株式会社 馬旨食品` が運営する`うまうまレストラン`の場合は前者を優先）
- 重複確認： 同一金額のレシートが2枚以上続いた場合は、アラートに `重複確認` と表示してください（通常のレシートに続いて、クレジットカードの明細が出力される場合を想定）


## 出力形式（CSV）
- CSV（カンマ区切り）形式で出力
- CSVの構造を破壊する文字（カンマ`,` および改行など）がデータ中に現れた場合は取り除く（ダブルクオート`"` 等によるエスケープは行わない）
- 列名（出力項目）はそのまま日本語で表示

## PDFファイルの説明
- PDFは複数の画像（複数のレシート）で構成されます。各画像について処理を行ってください。**全ての画像を必ず処理**すること
- 画像ごとに向きがバラバラな場合があります。OCR処理を行う前に画像の向きを確認してください
- 白紙（レシートの裏面）や、広告等のレシート以外の画像が含まれることがあります。その画像は、**読み取り対象外**として、CSVへの出力は不要です


## 日本の習慣やレシートに関する補足
- `（株）` および `㈱` は株式会社を意味する略称です
- 稀に文字を縦書きする場合があります
- 手書きのレシートの円記号 `￥` `¥` は、通常数字 `4` と見分けにくい。自信を持って判定できない場合は`不明`としてください

## 出力サンプル
```text
ファイル名,ページ番号,日付,店名,合計金額,登録番号,支払い手段,アラート
20250713_004.pdf,1,2025-02-14,スシロー 長久手店,5520,T4010001148370,現金,
20250713_004.pdf,2,2025-02-27,大都会パーキング,600,T6180001010999,クレジットカード,
20250713_004.pdf,3,2025-02-14,タイムズ24株式会社 名駅2丁目第8駐車場,6000,T4010001374,キャッシュレス決済,登録番号が桁数異常
20250713_004.pdf,4,2025-02-09,有限会社 幸鮨,不明,T5170002009316,現金,手書きレシート 合計金額不鮮明
```